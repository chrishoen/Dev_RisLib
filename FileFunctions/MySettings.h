#pragma once

/*==============================================================================
Auxiliary alarm info.
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************

#include <string>
#include "json.h"

//******************************************************************************
//******************************************************************************
//******************************************************************************

//******************************************************************************
//******************************************************************************
//******************************************************************************
// This class contains auxiliary alarm configuration and state information.
// This class is designed such that instances will reside in shared memory. 

class MySettings
{
public:
   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Constants.

   static const int cMaxStringSize = 100;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // True if valid.
   bool mValidFlag;

   // Json file path.
   char mFilePath[cMaxStringSize];

   // Instrumentation.
   int mPF;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // If true then the alarm is enabled.
   bool mAlarmEnable;

   // If true then the buzzer is enabled.
   bool mBuzzerEnable;

   // Uncalibrated Measurement input.
   float mRawInput;

   // Calibrated measurement input.
   float mInput;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Initialize, there's no constructor. This is called once by the process
   // who first creates the shared memory.
   void initialize();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Read from the json file.
   void doRead();

   // Write to the json file.
   void doWrite();

   // Return a json value from the class member variables.
   Json::Value getJsonValueFromMembers();

   // Set the class member variables from a json value.
   void setMembersFromJsonValue(Json::Value aValue);

   // Return a string with json for all of the class member variables.
   std::string getJsonString();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Support.
   void show();
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
