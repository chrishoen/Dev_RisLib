#pragma once

/*==============================================================================
==============================================================================*/

//******************************************************************************
//******************************************************************************
//******************************************************************************


namespace PX
{
//******************************************************************************
//******************************************************************************
//******************************************************************************
// This is a gcode model. 

class Model
{
public:

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Constants.

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // If true then enable modificatios.
   bool mEnable;

   int mPF;


   // Adjustment for z direction changes.
   double mAdjustZ;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Members.

   // If true then first.
   bool mFirstFlag;

   // If true then a direction change happened.
   bool mUpChangeFlag;

   // If true then up else down
   int mUpFlag;
   int mLastUpFlag;

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Constructor.
   Model();
   void reset();

   //***************************************************************************
   //***************************************************************************
   //***************************************************************************
   // Methods.

   // Modify a gcode.Return true if there was a change.
   bool doModify(char* aGCodeString);
};

//******************************************************************************
//******************************************************************************
//******************************************************************************
// Global instance.

#ifdef _PXMODEL_CPP_
          Model gModel;
#else
   extern Model gModel;
#endif

//******************************************************************************
//******************************************************************************
//******************************************************************************
}//namespace
